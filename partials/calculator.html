<div class="calculator-wrapper">
    <div ng-include="textFile"></div>

    <div class="calculator">

        <div class="calculator-row">
            <div class="calculator-column">
                <div class="group" ng-class="{'invalid' : invalid.server}" ng-show="info.servers.length">
                    <div class="select-wrapper" ng-class="{'active': isServerChoose}">
                        <select required ng-model="model.server">
                            <option value="" disabled selected>Сервер</option>
                            <option ng-repeat="server in info.servers" ng-bind="server.name"
                                    value="{{server.name}}"></option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="calculator-column">
                <div class="group" ng-class="{'invalid' : invalid.nickname}">
                    <input type="text" ng-model="model.nickname" required>
                    <span class="highlight"></span>
                    <span class="bar"></span>
                    <label>Ник персонажа</label>
                </div>
            </div>
        </div>

        <div class="calculator-row sale-text" ng-show="model.server">
            Цена за <span ng-bind="currentServer.sum | kfilter"></span> <span ng-bind="model.currency"></span> на сервере <span ng-bind="currentServer.name"></span>
            составляет <span ng-bind="currentServer.rate * currentServer.sum"></span> руб. без учета скидок.
        </div>

        <div class="calculator-row">
            <div class="calculator-column">
                <div class="group" ng-class="{'invalid' : invalid.realM}">
                    <input type="number" ng-change="onChangeRealMoney()" ng-model="model.realM" required step="any">
                    <span class="highlight"></span>
                    <span class="bar"></span>
                    <label>Заплачу</label>
                </div>

            </div>
            <div class="calculator-column">
                <div class="group" ng-class="{'invalid' : invalid.gameM}">
                    <input type="number" ng-change="onChangeGameMoney()" ng-model="model.gameM" required step="any">
                    <span class="highlight"></span>
                    <span class="bar"></span>
                    <label>Получу</label>
                </div>
            </div>
        </div>

        <div class="calculator-row sale-text" ng-show="model.sale && model.gameM">
            Вы получаете скидку <span class="bold" ng-bind="model.sale"></span>%.
            С учетом скидки, цена за покупку <span class="bold" ng-bind="model.gameM | kfilter"></span> <span ng-bind="model.currency"></span>
            составит <span class="bold" ng-bind="model.payWithSale"></span> руб.
        </div>

        <div class="calculator-row">
            <div class="calculator-column full">
                <div class="group" ng-class="{'invalid' : invalid.contact}">
                    <input type="text" ng-model="model.contact" required>
                    <span class="highlight"></span>
                    <span class="bar"></span>
                    <label>Контакт</label>
                </div>
            </div>
        </div>

        <div class="calculator-row">
            <div class="calculator-column full">
                <div class="group" ng-class="{'invalid' : invalid.comment}">
                    <textarea id="comment" ng-model="model.comment" required
                              max-length="{{info.maxCommentLength}}"></textarea>
                    <label for="comment">Комментарий</label>

                    <div class="char-counter">
                        {{model.comment.length ? model.comment.length : "0"}}/{{info.maxCommentLength}}
                    </div>
                </div>
            </div>


        </div>

        <div class="calculator-row">
            <button class="calculator-button" ng-click="send()">Купить</button>
        </div>


    </div>
    <!--<div class="sales" ng-show="currentServer.sales && currentServer.sales.length">-->
        <!--<h3>Скидки:</h3>-->
        <!--<ul class="item-list">-->
            <!--<li class="header">-->
                <!--<div class="item-half">От</div>-->
                <!--<div class="item-half">Скидка</div>-->
            <!--</li>-->
            <!--<li ng-repeat="sale in currentServer.sales track by $index">-->
                <!--<div class="item-half"><span ng-bind="sale.from"></span> <span ng-bind="model.currency"></span></div>-->
                <!--<div class="item-half"><span ng-bind="sale.value"></span>%</div>-->
            <!--</li>-->
        <!--</ul>-->
    <!--</div>-->

</div>